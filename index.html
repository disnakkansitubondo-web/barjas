<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APLIKASI BARJAS - SISTEM BANTUAN</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="modal fade login-modal" id="loginModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="login-header">
                    <div class="login-icon"><i class="fas fa-lock"></i></div>
                    <h2 class="login-title">AUTHENTICATION REQUIRED</h2>
                    <p class="login-subtitle">Masukkan Kode Keamanan untuk Mengakses Aplikasi</p>
                </div>
                <div class="login-body">
                    <form id="loginForm">
                        <div class="mb-3 login-form-group">
                            <label class="form-label login-form-label"><i class="fas fa-key"></i> Kode Keamanan</label>
                            <div class="input-group">
                                <input type="password" class="form-control login-form-control" id="securityCode" placeholder="Masukkan kode akses aplikasi">
                                <button class="btn btn-outline-secondary toggle-password" type="button"><i class="fas fa-eye"></i></button>
                            </div>
                            <div class="form-text text-danger login-attempts-count" id="attemptsCount"></div>
                            <div class="login-hint"><i class="fas fa-lightbulb"></i> PEMERINTAH KABUPATEN SITUBONDO</div>
                        </div>
                        <button type="submit" class="btn btn-login" id="loginButton">
                            <span class="login-button-text">Masuk ke Aplikasi</span>
                            <span class="spinner-border spinner-border-sm d-none" id="loginSpinner"></span>
                        </button>
                    </form>
                    <div class="login-blocked-message d-none" id="blockedMessage">
                        <i class="fas fa-ban me-2"></i>
                        <span id="blockedText">Terlalu banyak percobaan gagal. Silakan coba lagi dalam </span>
                        <span class="login-countdown" id="countdown">30</span> detik.
                    </div>
                    <div class="login-security-notice"><i class="fas fa-info-circle me-2"></i>Hubungi Administrator untuk mendapatkan kode akses</div>
                    <div class="login-developer-info">
                        <h5 class="mb-3">Developer Information</h5>
                        <div class="login-developer-contact">
                            <p><i class="fab fa-whatsapp me-2"></i> <a href="https://wa.me/6285647709114" target="_blank">+62 856-4770-9114</a></p>
                            <p><i class="fas fa-envelope me-2"></i> <a href="mailto:admin@anekamarket.my.id">admin@anekamarket.my.id</a></p>
                        </div>
                    </div>
                    <div class="login-copyright">&copy; 2025 Lentera karya Situbondo</div>
                </div>
            </div>
        </div>
    </div>

    <div class="app-content-unauthenticated" id="appContent">
        <button class="mobile-menu-btn" id="mobileMenuBtn"><i class="fas fa-bars"></i></button>
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <div class="app-container animate-fadeIn">
            <header class="app-header">
                <div class="app-logo"><i class="fas fa-hands-helping"></i></div>
                <h1 class="app-title">BARJAS</h1>
                <p class="app-subtitle">Sistem Bantuan Terpadu</p>
                <p class="app-subtitle">DINAS PETERNAKAN DAN PERIKANAN KABUPATEN SITUBONDO</p>
                <div class="watermark">WebApp v9.8.96 CopyRight Lentera Karya Situbondo</div>
            </header>

            <div class="row g-0">
                <aside class="col-md-3 col-lg-2 p-4 bg-light" id="sidebarMenu">
                    <nav class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                        <button class="nav-link active" id="v-pills-dashboard-tab" data-bs-toggle="pill" data-bs-target="#v-pills-dashboard" type="button" role="tab" aria-controls="v-pills-dashboard" aria-selected="true"><i class="fas fa-tachometer-alt feature-icon"></i> Dashboard</button>
                        <button class="nav-link" id="v-pills-input-tab" data-bs-toggle="pill" data-bs-target="#v-pills-input" type="button" role="tab" aria-controls="v-pills-input" aria-selected="false"><i class="fas fa-pencil-alt feature-icon"></i> Input Data</button>
                        <button class="nav-link" id="v-pills-data-tab" data-bs-toggle="pill" data-bs-target="#v-pills-data" type="button" role="tab" aria-controls="v-pills-data" aria-selected="false"><i class="fas fa-database feature-icon"></i> Data Bantuan</button>
                        <button class="nav-link" id="v-pills-filter-tab" data-bs-toggle="pill" data-bs-target="#v-pills-filter" type="button" role="tab" aria-controls="v-pills-filter" aria-selected="false"><i class="fas fa-filter feature-icon"></i> Filter Data</button>
                        <button class="nav-link" id="v-pills-print-tab" data-bs-toggle="pill" data-bs-target="#v-pills-print" type="button" role="tab" aria-controls="v-pills-print" aria-selected="false"><i class="fas fa-print feature-icon"></i> Cetak Laporan</button>
                        <button class="nav-link" id="v-pills-export-tab" data-bs-toggle="pill" data-bs-target="#v-pills-export" type="button" role="tab" aria-controls="v-pills-export" aria-selected="false"><i class="fas fa-file-export feature-icon"></i> Ekspor Data</button>
                        <button class="nav-link" id="v-pills-backup-tab" data-bs-toggle="pill" data-bs-target="#v-pills-backup" type="button" role="tab" aria-controls="v-pills-backup" aria-selected="false"><i class="fas fa-download feature-icon"></i> Backup & Restore</button>
                        <button class="nav-link" id="v-pills-settings-tab" data-bs-toggle="pill" data-bs-target="#v-pills-settings" type="button" role="tab" aria-controls="v-pills-settings" aria-selected="false"><i class="fas fa-cog feature-icon"></i> Pengaturan</button>
                        <button class="nav-link" id="v-pills-logout-tab" type="button"><i class="fas fa-sign-out-alt feature-icon"></i> Keluar</button>
                    </nav>
                    <div class="developer-info mt-4">
                        <h6>Developer Contact</h6>
                        <div class="developer-contact">
                            <p><i class="fab fa-whatsapp me-2"></i> <a href="https://wa.me/6285647709114" target="_blank">+62 856-4770-9114</a></p>
                            <p><i class="fas fa-envelope me-2"></i> <a href="mailto:admin@anekamarket.my.id">admin@anekamarket.my.id</a></p>
                        </div>
                    </div>
                </aside>

                <main class="col-md-9 col-lg-10 p-5">
                    <div class="tab-content" id="v-pills-tabContent">
                        <div class="tab-pane fade show active" id="v-pills-dashboard" role="tabpanel" aria-labelledby="v-pills-dashboard-tab">
                            <h3 class="section-title">Dashboard</h3>
                            <div class="row">
                                <div class="col-lg-3 col-md-6 mb-4"><div class="stats-box"><i class="fas fa-users fa-2x text-primary"></i><div class="stats-number" id="totalPenerima">0</div><div class="stats-label">Total Penerima</div></div></div>
                                <div class="col-lg-3 col-md-6 mb-4"><div class="stats-box"><i class="fas fa-money-bill-wave fa-2x text-success"></i><div class="stats-number" id="totalBantuan">0</div><div class="stats-label">Total Bantuan Uang</div></div></div>
                                <div class="col-lg-3 col-md-6 mb-4"><div class="stats-box"><i class="fas fa-calendar-alt fa-2x text-warning"></i><div class="stats-number" id="tahunAktif">2025</div><div class="stats-label">Tahun Aktif</div></div></div>
                                <div class="col-lg-3 col-md-6 mb-4"><div class="stats-box"><i class="fas fa-chart-line fa-2x text-info"></i><div class="stats-number" id="rataBantuan">0</div><div class="stats-label">Rata-rata Bantuan Uang</div></div></div>
                            </div>
                            <div class="row mt-4">
                                <div class="col-md-6"><div class="card"><div class="card-header"><i class="fas fa-chart-pie me-2"></i> Distribusi Bantuan per Kecamatan</div><div class="card-body"><canvas id="kecamatanChart" height="250"></canvas></div></div></div>
                                <div class="col-md-6"><div class="card"><div class="card-header"><i class="fas fa-chart-bar me-2"></i> Tren Bantuan per Tahun</div><div class="card-body"><canvas id="tahunChart" height="250"></canvas></div></div></div>
                            </div>
                            <div class="row mt-4">
                                <div class="col-12"><div class="card"><div class="card-header"><i class="fas fa-history me-2"></i> Data Terbaru</div><div class="card-body"><div class="table-responsive"><table class="table table-hover data-table"><thead><tr><th>Tanggal</th><th>Nama Penerima</th><th>Desa</th><th>Jenis Bantuan</th><th>Jumlah</th></tr></thead><tbody id="recentData"><tr><td colspan="5" class="text-center">Tidak ada data</td></tr></tbody></table></div></div></div></div>
                            </div>
                        </div>

                        <div class="tab-pane fade" id="v-pills-input" role="tabpanel" aria-labelledby="v-pills-input-tab">
                            <h3 class="section-title">Input Data Bantuan</h3>
                            <div class="card"><div class="card-header"><i class="fas fa-pencil-alt me-2"></i> Formulir Input Data</div><div class="card-body">
                                <form id="inputForm" novalidate>
                                    <div class="row mb-3"><div class="col-md-6"><label for="nama" class="form-label"><i class="fas fa-user"></i> Nama Penerima</label><input type="text" class="form-control" id="nama" required><div class="error-message" id="namaError">Nama penerima wajib diisi.</div></div><div class="col-md-6"><label for="nik" class="form-label"><i class="fas fa-id-card"></i> NIK</label><input type="text" class="form-control" id="nik" required maxlength="16"><div class="error-message" id="nikError">NIK wajib diisi dan harus 16 digit angka.</div></div></div>
                                    <div class="row mb-3"><div class="col-md-6"><label for="whatsapp" class="form-label"><i class="fab fa-whatsapp"></i> Nomor WhatsApp</label><div class="whatsapp-input-container"><span class="whatsapp-prefix">+62</span><input type="tel" class="form-control whatsapp-input" id="whatsapp" placeholder="8xx-xxxx-xxxx" required></div><div class="error-message" id="whatsappError">Nomor WhatsApp wajib diisi.</div></div><div class="col-md-6"><label for="namaKelompok" class="form-label"><i class="fas fa-users"></i> Nama Kelompok</label><div class="input-group"><input type="text" class="form-control" id="namaKelompok" placeholder="Opsional"><button type="button" class="btn btn-not-group" id="btnBukanKelompok">Individu</button></div></div></div>
                                    <div class="row mb-3"><div class="col-md-6"><label for="jabatan" class="form-label"><i class="fas fa-user-tag"></i> Jabatan</label><select class="form-select" id="jabatan"><option value="Individu" selected>Individu</option><option value="Ketua Kelompok">Ketua Kelompok</option><option value="Sekretaris">Sekretaris</option><option value="Bendahara">Bendahara</option><option value="Pengawas">Pengawas</option><option value="Anggota">Anggota</option></select></div><div class="col-md-6"><label for="tahunAnggaran" class="form-label"><i class="fas fa-calendar"></i> Tahun Anggaran</label><select class="form-select" id="tahunAnggaran"></select></div></div>
                                    <div class="row mb-3"><div class="col-md-6"><label for="kecamatan" class="form-label"><i class="fas fa-map-marker-alt"></i> Kecamatan</label><select class="form-select" id="kecamatan" required><option value="">Pilih Kecamatan</option></select><div class="error-message" id="kecamatanError">Kecamatan wajib dipilih.</div></div><div class="col-md-6"><label for="desa" class="form-label"><i class="fas fa-map-marked-alt"></i> Desa</label><select class="form-select" id="desa" required><option value="">Pilih Desa</option></select><div class="error-message" id="desaError">Desa wajib dipilih.</div></div></div>
                                    <div class="row mb-3"><div class="col-md-6"><label for="alamat" class="form-label"><i class="fas fa-home"></i> Alamat Lengkap</label><textarea class="form-control" id="alamat" rows="1"></textarea></div><div class="col-md-6"><label for="jenisBantuan" class="form-label"><i class="fas fa-gift"></i> Jenis Bantuan</label><select class="form-select" id="jenisBantuan"><option value="Uang">Uang</option><option value="Barang">Barang</option><option value="Jasa">Jasa</option></select></div></div>
                                    <div class="row mb-3"><div class="col-md-6"><label for="namaBantuan" class="form-label"><i class="fas fa-gift"></i> Nama Bantuan</label><input type="text" class="form-control" id="namaBantuan" placeholder="Contoh: Mesin, Uang Tunai BOS, Perbaikan Rumah" required><div class="error-message" id="namaBantuanError">Nama bantuan wajib diisi.</div></div><div class="col-md-6"><label for="jumlahBantuan" class="form-label"><i class="fas fa-coins"></i> Jumlah Bantuan</label><div class="input-group"><input type="text" class="form-control" id="jumlahBantuan" placeholder="Jumlah" required><select class="form-select" id="satuanBantuan" style="max-width: 120px;"><option value="Rupiah">Rupiah</option><option value="Unit">Unit</option><option value="Paket">Paket</option></select></div><div class="error-message" id="jumlahBantuanError">Jumlah bantuan wajib diisi.</div></div></div>
                                    <div class="row mb-3"><div class="col-md-6"><label for="tanggalTerima" class="form-label"><i class="fas fa-calendar-check"></i> Tanggal Menerima</label><input type="date" class="form-control" id="tanggalTerima" required><div class="error-message" id="tanggalTerimaError">Tanggal menerima wajib diisi.</div></div><div class="col-md-6"><label for="namaPetugas" class="form-label"><i class="fas fa-user-tie"></i> Nama Petugas</label><input type="text" class="form-control" id="namaPetugas" placeholder="Nama petugas yang menangani" required><div class="error-message" id="namaPetugasError">Nama petugas wajib diisi.</div></div></div>
                                    <div class="row mb-3"><div class="col-md-6"><label for="driveLink" class="form-label"><i class="fab fa-google-drive"></i> Link Google Drive</label><input type="url" class="form-control" id="driveLink" placeholder="https://drive.google.com/..."><div class="error-message" id="driveLinkError">Harap masukkan URL Google Drive yang valid.</div></div><div class="col-md-6"><label for="kodeValidasi" class="form-label"><i class="fas fa-qrcode"></i> Kode Validasi</label><div class="input-group"><input type="text" class="form-control" id="kodeValidasi" placeholder="Generate kode setelah isi NIK" readonly required><button type="button" class="btn btn-primary" id="generateKodeBtn">Generate</button></div><div class="error-message" id="kodeValidasiError">Kode validasi wajib digenerate.</div></div></div>
                                    <div class="row mb-3"><div class="col-md-12"><label for="keterangan" class="form-label"><i class="fas fa-sticky-note"></i> Keterangan</label><textarea class="form-control" id="keterangan" rows="2" placeholder="Tambahkan keterangan jika diperlukan"></textarea></div></div>
                                    <div class="d-flex justify-content-end mt-4"><button type="reset" class="btn btn-secondary me-2"><i class="fas fa-undo me-1"></i> Reset</button><button type="submit" class="btn btn-primary"><i class="fas fa-save me-1"></i> Simpan Data</button></div>
                                </form>
                            </div></div>
                        </div>

                        <div class="tab-pane fade" id="v-pills-data" role="tabpanel" aria-labelledby="v-pills-data-tab">
                            <h3 class="section-title">Data Bantuan</h3>
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <div><i class="fas fa-database me-2"></i> Daftar Penerima Bantuan</div>
                                    <div class="input-group" style="max-width: 300px;"><input type="text" class="form-control form-control-sm" id="searchData" placeholder="Cari data..."><button class="btn btn-sm btn-outline-secondary" id="clearSearchBtn"><i class="fas fa-times"></i></button></div>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive"><table class="table table-hover data-table" id="dataTable"><thead><tr><th>No</th><th>Nama</th><th>NIK</th><th>WhatsApp</th><th>Kelompok</th><th>Jabatan</th><th>Tahun</th><th>Kecamatan</th><th>Desa</th><th>Jenis Bantuan</th><th>Nama Bantuan</th><th>Jumlah</th><th>Tanggal</th><th>Petugas</th><th>Drive Link</th><th>Kode Validasi</th><th>Aksi</th></tr></thead><tbody id="dataTableBody"><tr><td colspan="17" class="text-center py-4">Tidak ada data</td></tr></tbody></table></div>
                                    <div class="d-flex justify-content-between align-items-center mt-3"><div class="text-muted" id="tableInfo">Menampilkan 0 dari 0 data</div><nav><ul class="pagination pagination-sm mb-0" id="pagination"></ul></nav></div>
                                </div>
                            </div>
                        </div>

                        <div class="tab-pane fade" id="v-pills-filter" role="tabpanel" aria-labelledby="v-pills-filter-tab">
                            <h3 class="section-title">Filter Data Bantuan</h3>
                            <div class="card"><div class="card-header"><i class="fas fa-filter me-2"></i> Filter Data</div><div class="card-body"><div class="row mb-3"><div class="col-md-3"><label for="filterTahun" class="form-label">Tahun</label><select class="form-select" id="filterTahun"><option value="">Semua Tahun</option></select></div><div class="col-md-3"><label for="filterKecamatan" class="form-label">Kecamatan</label><select class="form-select" id="filterKecamatan"><option value="">Semua Kecamatan</option></select></div><div class="col-md-3"><label for="filterDesa" class="form-label">Desa</label><select class="form-select" id="filterDesa"><option value="">Semua Desa</option></select></div><div class="col-md-3"><label for="filterJenis" class="form-label">Jenis Bantuan</label><select class="form-select" id="filterJenis"><option value="">Semua Jenis</option><option value="Uang">Uang</option><option value="Barang">Barang</option><option value="Jasa">Jasa</option></select></div></div><div class="d-flex justify-content-end"><button type="button" class="btn btn-secondary me-2" id="resetFilterBtn"><i class="fas fa-undo me-1"></i> Reset Filter</button><button type="button" class="btn btn-primary" id="applyFilterBtn"><i class="fas fa-check me-1"></i> Terapkan Filter</button></div></div></div>
                            <div class="card mt-4"><div class="card-header d-flex justify-content-between align-items-center"><div><i class="fas fa-list me-2"></i> Data Hasil Filter</div><div class="badge bg-primary" id="filterResultCount">0 Data</div></div><div class="card-body"><div class="table-responsive"><table class="table table-hover data-table" id="filterTable"><thead><tr><th>No</th><th>Nama</th><th>NIK</th><th>WhatsApp</th><th>Kelompok</th><th>Jabatan</th><th>Tahun</th><th>Kecamatan</th><th>Desa</th><th>Jenis Bantuan</th><th>Nama Bantuan</th><th>Jumlah</th><th>Tanggal</th><th>Petugas</th><th>Drive Link</th><th>Kode Validasi</th></tr></thead><tbody id="filterTableBody"><tr><td colspan="16" class="text-center py-4">Tidak ada data</td></tr></tbody></table></div></div></div>
                        </div>

                        <div class="tab-pane fade" id="v-pills-print" role="tabpanel" aria-labelledby="v-pills-print-tab">
                            <h3 class="section-title">Cetak Laporan</h3>
                            <div class="card"><div class="card-header"><i class="fas fa-print me-2"></i> Opsi Cetak Laporan</div><div class="card-body"><div class="control-panel mb-4"><h6 class="control-title">1. Atur Filter Laporan</h6><div class="row"><div class="col-md-4"><label for="printTahun" class="form-label">Tahun</label><select class="form-select" id="printTahun"><option value="">Semua Tahun</option></select></div><div class="col-md-4"><label for="printKecamatan" class="form-label">Kecamatan</label><select class="form-select" id="printKecamatan"><option value="">Semua Kecamatan</option></select></div><div class="col-md-4"><label for="printJenis" class="form-label">Jenis Bantuan</label><select class="form-select" id="printJenis"><option value="">Semua Jenis</option><option value="Uang">Uang</option><option value="Barang">Barang</option><option value="Jasa">Jasa</option></select></div></div></div><h6 class="control-title">2. Pilih Aksi</h6><div class="row"><div class="col-md-6"><div class="card bg-light h-100"><div class="card-body text-center d-flex flex-column justify-content-center"><i class="fas fa-eye fa-3x text-info mb-3"></i><h5>Pratinjau Laporan</h5><p class="text-muted small">Lihat laporan di layar sebelum mencetak atau mengunduh PDF.</p><button class="btn btn-info mt-auto" id="previewBtn"><i class="fas fa-eye me-1"></i> Buka Pratinjau</button></div></div></div><div class="col-md-6"><div class="card bg-light h-100"><div class="card-body text-center d-flex flex-column justify-content-center"><i class="fas fa-file-pdf fa-3x text-danger mb-3"></i><h5>Unduh Laporan PDF</h5><p class="text-muted small">Simpan laporan yang telah difilter langsung sebagai file PDF.</p><button class="btn btn-danger mt-auto" id="printPdfBtn"><i class="fas fa-download me-1"></i> Unduh PDF</button></div></div></div></div></div></div>
                        </div>

                        <div class="tab-pane fade" id="v-pills-export" role="tabpanel" aria-labelledby="v-pills-export-tab">
                            <h3 class="section-title">Ekspor Data</h3>
                            <div class="card"><div class="card-header"><i class="fas fa-file-export me-2"></i> Opsi Ekspor Data</div><div class="card-body"><div class="control-panel mb-4"><h6 class="control-title">Atur Filter Ekspor</h6><div class="row"><div class="col-md-4"><label for="exportTahun" class="form-label">Tahun</label><select class="form-select" id="exportTahun"><option value="">Semua Tahun</option></select></div><div class="col-md-4"><label for="exportKecamatan" class="form-label">Kecamatan</label><select class="form-select" id="exportKecamatan"><option value="">Semua Kecamatan</option></select></div><div class="col-md-4"><label for="exportJenis" class="form-label">Jenis Bantuan</label><select class="form-select" id="exportJenis"><option value="">Semua Jenis</option><option value="Uang">Uang</option><option value="Barang">Barang</option><option value="Jasa">Jasa</option></select></div></div></div><div class="row"><div class="col-md-3"><div class="card bg-light"><div class="card-body text-center"><i class="fas fa-file-excel fa-3x text-success mb-3"></i><h5>Excel</h5><p class="text-muted small">Format .xlsx</p><button class="btn btn-success mt-2 w-100" id="exportExcelBtn"><i class="fas fa-download me-1"></i> Ekspor</button></div></div></div><div class="col-md-3"><div class="card bg-light"><div class="card-body text-center"><i class="fas fa-file-csv fa-3x text-info mb-3"></i><h5>CSV</h5><p class="text-muted small">Format .csv</p><button class="btn btn-info mt-2 w-100" id="exportCsvBtn"><i class="fas fa-download me-1"></i> Ekspor</button></div></div></div><div class="col-md-3"><div class="card bg-light"><div class="card-body text-center"><i class="fas fa-file-code fa-3x text-warning mb-3"></i><h5>JSON</h5><p class="text-muted small">Format .json</p><button class="btn btn-warning mt-2 w-100" id="exportJsonBtn"><i class="fas fa-download me-1"></i> Ekspor</button></div></div></div><div class="col-md-3"><div class="card bg-light"><div class="card-body text-center"><i class="fas fa-file-pdf fa-3x text-danger mb-3"></i><h5>PDF</h5><p class="text-muted small">Format .pdf</p><button class="btn btn-danger mt-2 w-100" id="exportPdfBtn"><i class="fas fa-download me-1"></i> Ekspor</button></div></div></div></div></div></div>
                        </div>

                        <div class="tab-pane fade" id="v-pills-backup" role="tabpanel" aria-labelledby="v-pills-backup-tab">
                            <h3 class="section-title">Backup & Restore Data</h3>
                            <div class="row"><div class="col-md-6"><div class="card"><div class="card-header"><i class="fas fa-download me-2"></i> Backup Data</div><div class="card-body text-center"><i class="fas fa-database fa-4x text-primary mb-3"></i><h5>Backup Seluruh Data</h5><p class="text-muted">Simpan salinan data ke file JSON (terenkripsi)</p><div class="mt-4"><label for="backupFileName" class="form-label">Nama File Backup</label><input type="text" class="form-control" id="backupFileName" value="backup-barjas-secure"></div><button class="btn btn-primary mt-3" id="backupDataBtn"><i class="fas fa-download me-1"></i> Backup Data</button></div></div></div><div class="col-md-6"><div class="card"><div class="card-header"><i class="fas fa-upload me-2"></i> Restore Data</div><div class="card-body text-center"><i class="fas fa-file-upload fa-4x text-success mb-3"></i><h5>Restore Data dari File</h5><p class="text-muted">Muat ulang data dari file backup</p><div class="mt-3"><input type="file" class="form-control" id="restoreFileInput" accept=".json"><button class="btn btn-success mt-3 w-100" id="restoreDataBtn" disabled><i class="fas fa-upload me-1"></i> Restore Data</button></div><div class="alert alert-warning mt-3"><i class="fas fa-exclamation-triangle me-1"></i><strong>Peringatan:</strong> Restore akan menimpa data yang ada!</div></div></div></div></div>
                            <div class="card mt-4"><div class="card-header bg-danger text-white"><i class="fas fa-trash-alt me-2"></i> Reset Data (Zona Berbahaya)</div><div class="card-body text-center"><i class="fas fa-exclamation-triangle fa-4x text-danger mb-3"></i><h5>Reset Seluruh Data Aplikasi</h5><p class="text-muted">Hapus semua data dan kembali ke keadaan awal</p><button class="btn btn-danger mt-2" id="resetDataBtn" data-bs-toggle="modal" data-bs-target="#confirmResetModal"><i class="fas fa-trash-alt me-1"></i> Reset Data</button><div class="alert alert-danger mt-3"><i class="fas fa-radiation me-1"></i><strong>PERINGATAN TINGGI:</strong> Tindakan ini tidak dapat dibatalkan! Semua data akan dihapus permanen.</div></div></div>
                        </div>

                        <div class="tab-pane fade" id="v-pills-settings" role="tabpanel" aria-labelledby="v-pills-settings-tab">
                            <h3 class="section-title">Pengaturan Aplikasi</h3>
                            <div class="card"><div class="card-header"><i class="fas fa-cog me-2"></i> Pengaturan Umum</div><div class="card-body"><form id="settingsForm"><div class="row mb-3"><div class="col-md-6"><label for="appName" class="form-label">Nama Aplikasi</label><input type="text" class="form-control" id="appName" value="BARJAS"></div><div class="col-md-6"><label for="appSubtitle" class="form-label">Subjudul Aplikasi</label><input type="text" class="form-control" id="appSubtitle" value="Sistem Bantuan Terpadu"></div></div><div class="row mb-3"><div class="col-md-6"><label for="defaultTahun" class="form-label">Tahun Default</label><select class="form-select" id="defaultTahun"></select></div><div class="col-md-6"><label for="itemsPerPage" class="form-label">Item per Halaman</label><select class="form-select" id="itemsPerPage"><option value="10">10 Item</option><option value="25">25 Item</option><option value="50">50 Item</option><option value="100">100 Item</option></select></div></div><div class="row mb-3"><div class="col-md-6"><label for="settingSecurityCode" class="form-label">Kode Keamanan Baru</label><input type="password" class="form-control" id="settingSecurityCode" placeholder="Biarkan kosong jika tidak ingin mengubah"><div class="form-text">Ganti kode untuk mengakses aplikasi.</div></div><div class="col-md-6"><label for="backupInterval" class="form-label">Interval Backup Otomatis</label><select class="form-select" id="backupInterval" disabled><option value="0">Tidak Ada (Fitur belum aktif)</option><option value="1">Setiap Hari</option><option value="7">Setiap Minggu</option><option value="30">Setiap Bulan</option></select></div></div><div class="form-check form-switch mb-3"><input class="form-check-input" type="checkbox" id="notifications" checked><label class="form-check-label" for="notifications">Aktifkan Notifikasi</label></div><div class="d-flex justify-content-end"><button type="submit" class="btn btn-primary">Simpan Pengaturan</button></div></form></div></div>
                            <div class="card mt-4"><div class="card-header"><i class="fas fa-info-circle me-2"></i> Informasi Aplikasi</div><div class="card-body"><div class="row"><div class="col-md-6"><ul class="list-group list-group-flush"><li class="list-group-item d-flex justify-content-between align-items-center">Versi Aplikasi<span class="badge bg-primary rounded-pill">2.1.0-rev1</span></li><li class="list-group-item d-flex justify-content-between align-items-center">Jumlah Data<span class="badge bg-info rounded-pill" id="settingsDataCount">0</span></li><li class="list-group-item d-flex justify-content-between align-items-center">Tanggal Backup Terakhir<span class="badge bg-secondary rounded-pill" id="lastBackupDate">-</span></li></ul></div><div class="col-md-6"><ul class="list-group list-group-flush"><li class="list-group-item d-flex justify-content-between align-items-center">Browser<span class="badge bg-success rounded-pill" id="browserInfo">-</span></li><li class="list-group-item d-flex justify-content-between align-items-center">Local Storage<span class="badge bg-warning rounded-pill" id="storageInfo">-</span></li><li class="list-group-item d-flex justify-content-between align-items-center">Status<span class="badge bg-success rounded-pill" id="appStatus">Aktif</span></li></ul></div></div></div></div>
                        </div>
                    </div>
                </main>
            </div>

            <footer class="copyright">
                &copy; 2025 BARJAS - Sistem Bantuan Terpadu. Hak Cipta Dilindungi.
            </footer>
        </div>

        <div class="floating-action-btn" id="fabBtn" title="Tambah Data Baru"><i class="fas fa-plus"></i></div>
        <div class="toast-container position-fixed bottom-0 end-0 p-3">
            <div class="toast notification-toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-autohide="true" data-bs-delay="5000">
                <div class="toast-header"><strong class="me-auto" id="toastTitle">BARJAS Notification</strong><small>Just now</small><button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button></div>
                <div class="toast-body" id="toastMessage"></div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="confirmResetModal" tabindex="-1" aria-hidden="true"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header bg-danger text-white"><h5 class="modal-title"><i class="fas fa-exclamation-triangle me-2"></i> Konfirmasi Reset Data</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><p>Apakah Anda benar-benar yakin ingin mereset semua data?</p><p class="text-danger"><strong>Peringatan:</strong> Tindakan ini akan menghapus semua data secara permanen dan tidak dapat dibatalkan!</p><p>Untuk mengonfirmasi, ketik <strong>RESET</strong> pada kolom di bawah ini:</p><input type="text" class="form-control" id="resetConfirmationInput" placeholder="Ketik RESET di sini"></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button><button type="button" class="btn btn-danger" id="confirmResetBtn" disabled>Ya, Reset Data</button></div></div></div></div>
    <div class="modal fade" id="previewModal" tabindex="-1" aria-hidden="true"><div class="modal-dialog modal-xl modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="previewModalTitle">Pratinjau Laporan</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><div id="previewContent"></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button><button type="button" class="btn btn-primary" id="printFromPreviewBtn"><i class="fas fa-print me-1"></i> Cetak Halaman Ini</button></div></div></div></div>
    <div class="modal fade link-modal" id="driveLinkModal" tabindex="-1" aria-hidden="true"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Edit Link Google Drive</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><div class="mb-3"><label for="modalDriveLink" class="form-label">Link Google Drive</label><input type="url" class="form-control" id="modalDriveLink" placeholder="https://drive.google.com/..."></div><div class="form-text">Pastikan link dapat diakses secara publik atau melalui izin yang sesuai.</div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button><button type="button" class="btn btn-primary" id="saveDriveLinkBtn">Simpan</button></div></div></div></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
